(()=>{"use strict";const t=document.querySelector("#tennis"),e=t.getContext("2d"),i=document.querySelector(".game_container");let o=i.offsetWidth,h=i.offsetHeight;t.width=o,t.height=h;let n=t.width,s=t.height;const c={x:n/2,y:s/2,radius:10,color:"red",speed:7,xDirection:Math.random()<.5?1:-1,yDirection:Math.random()<.5?1:-1,velocityX:7,velocityY:7,setSpeed:function(t){this.speed=t},setBallDirectionToRandom:function(){this.velocityX*=this.xDirection,this.velocityY*=this.yDirection},resetBallXPosition:function(){this.x=n/2},resetBallYPosition:function(){this.y=s/2},changeBallXDirection:function(){this.velocityX=-this.velocityX},makeBallRandomSpeed:function(t,e){var i,o;this.speed=(i=t,o=e,i=Math.ceil(i),o=Math.floor(o),Math.floor(Math.random()*(o-i))+i)},angleChangeFromHit:function(t,e){this.velocityX=this.speed*Math.cos(t)*e,this.velocityY=this.speed*Math.sin(t)},speedAddAfterHit:function(t){this.speed+=t},Move:function(){this.x+=this.velocityX,this.y+=this.velocityY,(this.y-this.radius<0||this.y+this.radius>s)&&(this.velocityY=-this.velocityY)}},l={height:100,x:0,y:s/2-50,width:10,color:"white",score:0,setScore:function(t){this.score=t},addScore:function(t){this.score+=t},mouseMove:function(e){let i=t.getBoundingClientRect();this.y=e.clientY-i.top-this.height/2},keyMove:function(){this.y<0?this.y=0:this.y+this.height>s?this.y=s-this.height:(O&&(this.y-=20),D&&(this.y+=20))}},r={height:100,x:n-10,y:s/2-50,width:10,color:"white",score:0,setScore:function(t){this.score=t},addScore:function(t){this.score+=t},keyMove:function(){this.y<0?this.y=0:this.y+this.height>s?this.y=s-this.height:(W&&(this.y-=20),H&&(this.y+=20))}},d={height:100,x:n-10,y:s/2-50,width:10,color:"white",score:0,computerLevel:.05,setComputerLevel:function(t){this.computerLevel=t},setScore:function(t){this.score=t},addScore:function(t){this.score+=t},move:function(){this.y<0?this.y=0:this.y+this.height>s?this.y=s-this.height:this.y+=(c.y-(this.y+this.height/2))*this.computerLevel}},a=new Audio("../src/tennis/sounds/hit.mp3"),u=new Audio("../src/tennis/sounds/tennisMusic.mp3"),y=()=>a.play();let f="Off";u.volume=.1;let w=!0,g="Off";function p(t,e){return e.top=e.y,e.bottom=e.y+e.height,e.left=e.x,e.right=e.x+e.width,t.top=t.y-t.radius,t.bottom=t.y+t.radius,t.left=t.x-t.radius,t.right=t.x+t.radius,t.right>e.left&&t.top<e.bottom&&t.left<e.right&&t.bottom>e.top}function m(){c.resetBallXPosition(),c.resetBallYPosition(),c.changeBallXDirection(),c.makeBallRandomSpeed(4,6)}function v(){d.setScore(0),l.setScore(0),c.setSpeed(4),k?d.setComputerLevel(.05):A?d.setComputerLevel(.25):B&&d.setComputerLevel(.5)}c.setBallDirectionToRandom();let x=!1,M=!1,S=!1,P=!1,L=!1,k=!0,A=!1,B=!1,C=!0,X=!1,b=!1,Y=!1,O=!1,D=!1,W=!1,H=!1,R=!1,T=!1;const E=()=>b=!1,F=()=>Y=!1;function K(t,e,i,o,h,n){t.code===e&&(O=n),t.code===i&&(D=n),t.code===o&&(W=n),t.code===h&&(H=n)}function q(t,e,i,o,h,c,l){return t.offsetX>=n/e*o&&t.offsetX<=n/e*h&&t.offsetY>=s/i*c&&t.offsetY<=s/i*l}function N(t){b&&l.mouseMove(t)}function I(t){Y&&K(t,"KeyW","KeyS","Numpad8","Numpad2",!0)}function _(t){Y&&K(t,"KeyW","KeyS","Numpad8","Numpad2",!1)}function G(t){"KeyP"===t.code&&(X=!X)}function j(t){C&&(q(t,10,12,4,6,3,4)&&(b=!0,C=!1),q(t,10,12,4,6,4,5)&&(Y=!0,C=!1,console.log("menuClick -> localTwoPlayers",Y)),q(t,10,12,4,6,6.5,7)&&(C=!1,R=!0)),L&&q(t,10,12,3.8,6,5,6)&&(C=!0,S=!1,A=!1,B=!1,x=!1,M=!1,P=!1,L=!1),R&&(q(t,10,12,3.8,6,5.5,6.5)&&(C=!0,R=!1),q(t,10,12,3.8,6,3,4.2)&&(console.log("music"),T?(T=!1,console.log("menuClick -> musicTurnOn",T)):(T=!0,console.log("menuClick -> musicTurnOn",T))),q(t,10,12,3.8,6,4.2,5)&&(console.log("sounds"),w=!w)),X&&q(t,10,12,3.8,8,6,7)&&(C=!0,X=!1,b=!1,Y=!1)}function z(t,i,o,h,n){e.beginPath(),e.fillStyle=n,e.fillRect(t,i,o,h),e.fill(),e.closePath()}function J(t,i,o,h){e.beginPath(),e.arc(t,i,o,0,2*Math.PI,!0),e.fillStyle=h,e.fill(),e.closePath()}function Q(t,i,o,h){e.fillStyle=h,e.fillText(t,i,o)}window.onload=function(){requestAnimationFrame((function i(){(function(){if(b){if(X)return;!function(){c.Move(),d.move();let t=c.x<n/2?l:d;if(p(c,t)){y(),console.log(a);let e=(c.y-(t.y+t.height/2))/(t.height/2)*Math.PI/4,i=c.x<n/2?1:-1;c.angleChangeFromHit(e,i),c.speedAddAfterHit(.4)}c.x-c.radius<0?(d.addScore(1),console.log("onePlayerModeActions -> comp.score",d.score),m()):c.x+c.radius>n&&(l.addScore(1),console.log("onePlayerModeActions -> player.score",l.score),m())}(),3!==l.score&&3!==d.score||(3===l.score?k?(console.log("update -> this.computerLevel",d.computerLevel),k=!1,A=!0,v()):A?(console.log("update -> this.computerLevel",d.computerLevel),A=!1,B=!0,v()):B&&(console.log("update -> this.computerLevel",d.computerLevel),k=!0,v(),P=!0,S=!1,E(),L=!0):(k=!0,S=!0,P=!1,E(),L=!0),v())}if(Y){if(X)return;!function(){c.Move(),l.keyMove(),r.keyMove();let t=c.x<n/2?l:r;if(p(c,t)){y();let e=(c.y-(t.y+t.height/2))/(t.height/2)*Math.PI/4,i=c.x<n/2?1:-1;c.angleChangeFromHit(e,i),c.speedAddAfterHit(.4)}c.x-c.radius<0?(r.addScore(1),console.log("onePlayerModeActions -> comp.score",r.score),m()):c.x+c.radius>n&&(l.addScore(1),console.log("onePlayerModeActions -> player.score",l.score),m())}(),3!==l.score&&3!==r.score||(3===l.score?(x=!0,M=!1):(M=!0,x=!1),l.score=0,r.setScore(0),F(),L=!0)}T?(u.play(),f="Off"):(u.pause(),f="On"),w?(a.volume=.2,g="Off"):(a.volume=0,g="On")})(),b&&(e.font="60px fantasy",z(0,0,t.width,t.height,"black"),z(l.x,l.y,l.width,l.height,l.color),z(d.x,d.y,d.width,d.height,d.color),Q(l.score,t.width/4,t.height/6,"white"),Q(d.score,3*t.width/4,t.height/6,"white"),e.font="30px fantasy",k?Q("Lvl 1",2*t.width/4,t.height/6,"white"):A?Q("Lvl_2",2*t.width/4,t.height/6,"white"):B&&Q("Lvl_3",2*t.width/4,t.height/6,"white"),J(c.x,c.y,c.radius,c.color),X&&(e.font="40px fantasy",Q("Pause",t.width/10*4,t.height/12*6,"white"),Q("Back to Menu",t.width/10*4,t.height/12*7,"white"))),Y&&(console.log("2 player Draw"),e.font="60px fantasy",z(0,0,t.width,t.height,"black"),z(l.x,l.y,l.width,l.height,l.color),z(r.x,r.y,r.width,r.height,r.color),Q(l.score,t.width/4,t.height/6,"white"),Q(r.score,3*t.width/4,t.height/6,"white"),J(c.x,c.y,c.radius,c.color),X&&(e.font="40px fantasy",Q("Pause",t.width/10*4,t.height/12*6,"white"),Q("Back to Menu",t.width/10*4,t.height/12*7,"white"))),R&&(e.font="30px fantasy",z(0,0,t.width,t.height,"black"),Q("Music "+f,t.width/10*4,t.height/12*4,"white"),Q("Sound "+g,t.width/10*4,t.height/12*5,"white"),Q("Back to menu",t.width/10*4,t.height/12*6,"white"),Q("1 player control : Mouse",t.width/10*4,t.height/12*7,"white"),Q("2 player control : W(up) | S(down) ",t.width/10*4,t.height/12*8,"white"),Q("8(up) | 2(down)",t.width/10*6.6,t.height/12*9,"white"),Q("P for pause",t.width/10*4,t.height/12*10,"white")),C&&(e.font="30px fantasy",z(0,0,t.width,t.height,"black"),Q("One player",t.width/10*4,t.height/12*4,"white"),Q("Two players local",t.width/10*4,t.height/12*5,"white"),Q("Multiplayer",t.width/10*4,t.height/12*6,"white"),Q("Options",t.width/10*4,t.height/12*7,"white")),L&&(e.font="30px fantasy",z(0,0,t.width,t.height,"black"),Q("Go to menu",t.width/10*4,t.height/12*6,"white"),S&&Q("Computer Won",t.width/10*4,t.height/12*5,"white"),P&&Q("Player Won",t.width/10*4,t.height/12*5,"white"),x&&Q("Left Player Won",t.width/10*4,t.height/12*5,"white"),M&&Q("Right Player Won",t.width/10*4,t.height/12*5,"white")),requestAnimationFrame(i)})),t.addEventListener("mousemove",N),t.addEventListener("mousedown",j),window.addEventListener("keydown",I),window.addEventListener("keyup",_),window.addEventListener("keydown",G)}})();