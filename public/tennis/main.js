(()=>{"use strict";const t=document.querySelector("#tennis"),e=t.getContext("2d"),i=document.querySelector(".game_container");let h=i.offsetWidth,o=i.offsetHeight;t.width=h,t.height=o;let n=t.width,s=t.height;const c={x:n/2,y:s/2,radius:10,color:"red",speed:5,xDirection:Math.random()<.5?1:-1,yDirection:Math.random()<.5?1:-1,velocityX:5,velocityY:5,setSpeed:function(t){this.speed=t},setBallDirectionToRandom:function(){this.velocityX*=this.xDirection,this.velocityY*=this.yDirection},resetBallXPosition:function(){this.x=n/2},resetBallYPosition:function(){this.y=s/2},changeBallXDirection:function(){this.velocityX=-this.velocityX},makeBallRandomSpeed:function(t,e){var i,h;this.speed=(i=t,h=e,i=Math.ceil(i),h=Math.floor(h),Math.floor(Math.random()*(h-i))+i)},angleChangeFromHit:function(t,e){this.velocityX=this.speed*Math.cos(t)*e,this.velocityY=this.speed*Math.sin(t)},speedAddAfterHit:function(t){this.speed+=t},Move:function(){this.x+=this.velocityX,this.y+=this.velocityY,(this.y-this.radius<0||this.y+this.radius>s)&&(this.velocityY=-this.velocityY)}},l={height:100,x:0,y:s/2-50,width:10,color:"white",score:0,setScore:function(t){this.score=t},addScore:function(t){this.score+=t},mouseMove:function(e){let i=t.getBoundingClientRect();this.y=e.clientY-i.top-this.height/2},keyMove:function(){this.y<0?this.y=0:this.y+this.height>s?this.y=s-this.height:(O&&(this.y-=20),D&&(this.y+=20))}},r={height:100,x:n-10,y:s/2-50,width:10,color:"white",score:0,setScore:function(t){this.score=t},addScore:function(t){this.score+=t},keyMove:function(){this.y<0?this.y=0:this.y+this.height>s?this.y=s-this.height:(W&&(this.y-=20),H&&(this.y+=20))}},d={height:100,x:n-10,y:s/2-50,width:10,color:"white",score:0,computerLevel:.05,setComputerLevel:function(t){this.computerLevel=t},setScore:function(t){this.score=t},addScore:function(t){this.score+=t},move:function(){this.y<0?this.y=0:this.y+this.height>s?this.y=s-this.height:this.y+=(c.y-(this.y+this.height/2))*this.computerLevel}},a=new Audio("../src/tennis/sounds/hit.mp3"),u=new Audio("../src/tennis/sounds/tennisMusic.mp3"),f=()=>a.play();let y="Off";u.volume=.1;let w=!0,g="Off";function m(t,e){return e.top=e.y,e.bottom=e.y+e.height,e.left=e.x,e.right=e.x+e.width,t.top=t.y-t.radius,t.bottom=t.y+t.radius,t.left=t.x-t.radius,t.right=t.x+t.radius,t.right>e.left&&t.top<e.bottom&&t.left<e.right&&t.bottom>e.top}function p(){c.resetBallXPosition(),c.resetBallYPosition(),c.changeBallXDirection(),c.setSpeed(5)}function v(){d.setScore(0),l.setScore(0),L?d.setComputerLevel(.05):B?d.setComputerLevel(.25):C&&d.setComputerLevel(.5)}c.setBallDirectionToRandom();let x=!1,M=!1,S=!1,k=!1,P=!1,L=!0,B=!1,C=!1,X=!0,b=!1,Y=!1,A=!1,O=!1,D=!1,W=!1,H=!1,T=!1,R=!1;const E=()=>Y=!1,F=()=>A=!1;function K(t,e,i,h,o,n){t.code===e&&(O=n),t.code===i&&(D=n),t.code===h&&(W=n),t.code===o&&(H=n)}function q(t,e,i,h,o,c,l){return t.offsetX>=n/e*h&&t.offsetX<=n/e*o&&t.offsetY>=s/i*c&&t.offsetY<=s/i*l}function N(t){Y&&l.mouseMove(t)}function I(t){A&&K(t,"KeyW","KeyS","Numpad8","Numpad2",!0)}function _(t){A&&K(t,"KeyW","KeyS","Numpad8","Numpad2",!1)}function G(t){"KeyP"===t.code&&(b=!b)}function j(t){X&&(q(t,10,12,4,6,3,4)&&(Y=!0,X=!1),q(t,10,12,4,6,4,5)&&(A=!0,X=!1,console.log("menuClick -> localTwoPlayers",A)),q(t,10,12,4,6,6.5,7)&&(X=!1,T=!0)),P&&q(t,10,12,3.8,6,5,6)&&(X=!0,S=!1,B=!1,C=!1,x=!1,M=!1,k=!1,P=!1),T&&(q(t,10,12,3.8,6,5.5,6.5)&&(X=!0,T=!1),q(t,10,12,3.8,6,3,4.2)&&(console.log("music"),R?(R=!1,console.log("menuClick -> musicTurnOn",R)):(R=!0,console.log("menuClick -> musicTurnOn",R))),q(t,10,12,3.8,6,4.2,5)&&(console.log("sounds"),w=!w)),b&&q(t,10,12,3.8,8,6,7)&&(X=!0,b=!1,Y=!1,A=!1)}function z(t,i,h,o,n){e.beginPath(),e.fillStyle=n,e.fillRect(t,i,h,o),e.fill(),e.closePath()}function J(t,i,h,o){e.beginPath(),e.arc(t,i,h,0,2*Math.PI,!0),e.fillStyle=o,e.fill(),e.closePath()}function Q(t,i,h,o){e.fillStyle=o,e.fillText(t,i,h)}window.onload=function(){requestAnimationFrame((function i(){(function(){if(Y){if(b)return;!function(){c.Move(),d.move();let t=c.x<n/2?l:d;if(m(c,t)){f(),console.log(a);let e=(c.y-(t.y+t.height/2))/(t.height/2)*Math.PI/4,i=c.x<n/2?1:-1;c.angleChangeFromHit(e,i),c.speedAddAfterHit(.4)}c.x-c.radius<0?(d.addScore(1),p()):c.x+c.radius>n&&(l.addScore(1),p())}(),3!==l.score&&3!==d.score||(3===l.score?L?(L=!1,B=!0,v()):B?(B=!1,C=!0,v()):C&&(L=!0,v(),k=!0,S=!1,E(),P=!0):(L=!0,S=!0,k=!1,E(),P=!0),v())}if(A){if(b)return;!function(){c.Move(),l.keyMove(),r.keyMove();let t=c.x<n/2?l:r;if(m(c,t)){f();let e=(c.y-(t.y+t.height/2))/(t.height/2)*Math.PI/4,i=c.x<n/2?1:-1;c.angleChangeFromHit(e,i),c.speedAddAfterHit(.4)}c.x-c.radius<0?(r.addScore(1),p()):c.x+c.radius>n&&(l.addScore(1),p())}(),3!==l.score&&3!==r.score||(3===l.score?(x=!0,M=!1):(M=!0,x=!1),l.score=0,r.setScore(0),F(),P=!0)}R?(u.play(),y="Off"):(u.pause(),y="On"),w?(a.volume=.2,g="Off"):(a.volume=0,g="On")})(),Y&&(e.font="60px fantasy",z(0,0,t.width,t.height,"black"),z(l.x,l.y,l.width,l.height,l.color),z(d.x,d.y,d.width,d.height,d.color),Q(l.score,t.width/4,t.height/6,"white"),Q(d.score,3*t.width/4,t.height/6,"white"),e.font="30px fantasy",L?Q("Lvl 1",2*t.width/4,t.height/6,"white"):B?Q("Lvl_2",2*t.width/4,t.height/6,"white"):C&&Q("Lvl_3",2*t.width/4,t.height/6,"white"),J(c.x,c.y,c.radius,c.color),b&&(e.font="40px fantasy",Q("Pause",t.width/10*4,t.height/12*6,"white"),Q("Back to Menu",t.width/10*4,t.height/12*7,"white"))),A&&(console.log("2 player Draw"),e.font="60px fantasy",z(0,0,t.width,t.height,"black"),z(l.x,l.y,l.width,l.height,l.color),z(r.x,r.y,r.width,r.height,r.color),Q(l.score,t.width/4,t.height/6,"white"),Q(r.score,3*t.width/4,t.height/6,"white"),J(c.x,c.y,c.radius,c.color),b&&(e.font="40px fantasy",Q("Pause",t.width/10*4,t.height/12*6,"white"),Q("Back to Menu",t.width/10*4,t.height/12*7,"white"))),T&&(e.font="30px fantasy",z(0,0,t.width,t.height,"black"),Q("Music "+y,t.width/10*4,t.height/12*4,"white"),Q("Sound "+g,t.width/10*4,t.height/12*5,"white"),Q("Back to menu",t.width/10*4,t.height/12*6,"white"),Q("1 player control : Mouse",t.width/10*4,t.height/12*7,"white"),Q("2 player control : W(up) | S(down) ",t.width/10*4,t.height/12*8,"white"),Q("8(up) | 2(down)",t.width/10*6.6,t.height/12*9,"white"),Q("P for pause",t.width/10*4,t.height/12*10,"white")),X&&(e.font="30px fantasy",z(0,0,t.width,t.height,"black"),Q("One player",t.width/10*4,t.height/12*4,"white"),Q("Two players local",t.width/10*4,t.height/12*5,"white"),Q("Multiplayer",t.width/10*4,t.height/12*6,"white"),Q("Options",t.width/10*4,t.height/12*7,"white")),P&&(e.font="30px fantasy",z(0,0,t.width,t.height,"black"),Q("Go to menu",t.width/10*4,t.height/12*6,"white"),S&&Q("Computer Won",t.width/10*4,t.height/12*5,"white"),k&&Q("Player Won",t.width/10*4,t.height/12*5,"white"),x&&Q("Left Player Won",t.width/10*4,t.height/12*5,"white"),M&&Q("Right Player Won",t.width/10*4,t.height/12*5,"white")),requestAnimationFrame(i)})),t.addEventListener("mousemove",N),t.addEventListener("mousedown",j),window.addEventListener("keydown",I),window.addEventListener("keyup",_),window.addEventListener("keydown",G)}})();